"use strict";(self["webpackChunkcrf03"]=self["webpackChunkcrf03"]||[]).push([[78,431],{9078:function(a,e,l){l.r(e),l.d(e,{default:function(){return d}});var t=l(6768),n=l(144),s=l(1387),r=l(8082),c=l(7431);const u={key:0};var i={__name:"BranchEditView",setup(a){const e=(0,s.lq)(),l=(0,n.KR)(null),i=async()=>{const{data:a}=await r.A.get(`/branches/${e.params.aliasId}/`);l.value=a},o=async a=>{try{await r.A.put(`/branches/${l.value.alias_id}/`,a)}catch(e){e.response?.data?.version&&(alert(e.response.data.version),await i())}};return(0,t.sV)(i),(a,e)=>l.value?((0,t.uX)(),(0,t.CE)("div",u,[e[0]||(e[0]=(0,t.Lk)("h2",null,"Edit Branch",-1)),(0,t.bF)(c["default"],{"initial-data":l.value,"is-editing":!0,onSubmit:o},null,8,["initial-data"])])):(0,t.Q3)("",!0)}};const o=i;var d=o},7431:function(a,e,l){l.r(e),l.d(e,{default:function(){return L}});l(4114),l(8992),l(4520);var t=l(6768),n=l(4232),s=l(5130),r=l(144),c=l(1387),u=l(8082);const i={class:"container mt-4"},o={class:"row g-3"},d={class:"col-md-6"},v={class:"col-md-6"},p=["value"],h={class:"col-12"},b=["value"],m={class:"col-12"},f={type:"submit",class:"btn btn-primary"};var k={__name:"BranchFormView",setup(a){const e=(0,c.lq)(),l=(0,c.rd)(),k=(0,t.EW)((()=>e.path.includes("/edit/"))),y={1:"Head Office",2:"Branch"},L=(0,r.KR)({name:"",branch_type:2,parent:null,address:"",contact:"",version:1}),_=(0,r.KR)([]),w=(0,t.EW)((()=>_.value.filter((a=>a.alias_id!==e.params.aliasId)))),E=async()=>{try{const{data:a}=await u.A.get("/branches/");_.value=a}catch(a){console.error("Error loading branches:",a)}},C=async()=>{try{const a={...L.value,version:L.value.version};k.value?await u.A.put(`/branches/${e.params.aliasId}/`,a):await u.A.post("/branches/",a),l.push("/branches")}catch(a){409===a.response?.status&&(alert("Concurrency conflict. Please refresh and try again."),await E())}};return(0,t.sV)((async()=>{if(await E(),k.value){const{data:a}=await u.A.get(`/branches/${e.params.aliasId}/`);L.value=a}})),(a,e)=>((0,t.uX)(),(0,t.CE)("div",i,[(0,t.Lk)("h2",null,(0,n.v_)(k.value?"Edit":"Create")+" Branch",1),(0,t.Lk)("form",{onSubmit:(0,s.D$)(C,["prevent"])},[(0,t.Lk)("div",o,[(0,t.Lk)("div",d,[e[3]||(e[3]=(0,t.Lk)("label",{class:"form-label"},"Branch Name",-1)),(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>L.value.name=a),type:"text",class:"form-control",required:""},null,512),[[s.Jo,L.value.name]])]),(0,t.Lk)("div",v,[e[4]||(e[4]=(0,t.Lk)("label",{class:"form-label"},"Branch Type",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>L.value.branch_type=a),class:"form-select",required:""},[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(y,((a,e)=>(0,t.Lk)("option",{key:e,value:e},(0,n.v_)(a),9,p))),64))],512),[[s.u1,L.value.branch_type]])]),(0,t.Lk)("div",h,[e[6]||(e[6]=(0,t.Lk)("label",{class:"form-label"},"Parent Branch",-1)),(0,t.bo)((0,t.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>L.value.parent=a),class:"form-select"},[e[5]||(e[5]=(0,t.Lk)("option",{value:null},"No Parent",-1)),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(w.value,(a=>((0,t.uX)(),(0,t.CE)("option",{key:a.alias_id,value:a.alias_id},(0,n.v_)(a.name),9,b)))),128))],512),[[s.u1,L.value.parent]])]),(0,t.Lk)("div",m,[(0,t.Lk)("button",f,(0,n.v_)(k.value?"Update":"Create")+" Branch ",1)])])],32)]))}};const y=k;var L=y}}]);
//# sourceMappingURL=78.b9d34800.js.map