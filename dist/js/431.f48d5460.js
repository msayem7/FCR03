"use strict";(self["webpackChunkcrf03"]=self["webpackChunkcrf03"]||[]).push([[431],{7431:function(a,e,l){l.r(e),l.d(e,{default:function(){return L}});l(4114),l(8992),l(4520);var n=l(6768),s=l(4232),t=l(5130),r=l(144),c=l(1387),u=l(8082);const o={class:"container mt-4"},i={class:"row g-3"},v={class:"col-md-6"},d={class:"col-md-6"},p=["value"],m={class:"col-12"},b=["value"],h={class:"col-12"},k={type:"submit",class:"btn btn-primary"};var f={__name:"BranchFormView",setup(a){const e=(0,c.lq)(),l=(0,c.rd)(),f=(0,n.EW)((()=>e.path.includes("/edit/"))),y={1:"Head Office",2:"Branch"},L=(0,r.KR)({name:"",branch_type:2,parent:null,address:"",contact:"",version:1}),_=(0,r.KR)([]),w=(0,n.EW)((()=>_.value.filter((a=>a.alias_id!==e.params.aliasId)))),C=async()=>{try{const{data:a}=await u.A.get("/branches/");_.value=a}catch(a){console.error("Error loading branches:",a)}},E=async()=>{try{const a={...L.value,version:L.value.version};f.value?await u.A.put(`/branches/${e.params.aliasId}/`,a):await u.A.post("/branches/",a),l.push("/branches")}catch(a){409===a.response?.status&&(alert("Concurrency conflict. Please refresh and try again."),await C())}};return(0,n.sV)((async()=>{if(await C(),f.value){const{data:a}=await u.A.get(`/branches/${e.params.aliasId}/`);L.value=a}})),(a,e)=>((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("h2",null,(0,s.v_)(f.value?"Edit":"Create")+" Branch",1),(0,n.Lk)("form",{onSubmit:(0,t.D$)(E,["prevent"])},[(0,n.Lk)("div",i,[(0,n.Lk)("div",v,[e[3]||(e[3]=(0,n.Lk)("label",{class:"form-label"},"Branch Name",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>L.value.name=a),type:"text",class:"form-control",required:""},null,512),[[t.Jo,L.value.name]])]),(0,n.Lk)("div",d,[e[4]||(e[4]=(0,n.Lk)("label",{class:"form-label"},"Branch Type",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>L.value.branch_type=a),class:"form-select",required:""},[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(y,((a,e)=>(0,n.Lk)("option",{key:e,value:e},(0,s.v_)(a),9,p))),64))],512),[[t.u1,L.value.branch_type]])]),(0,n.Lk)("div",m,[e[6]||(e[6]=(0,n.Lk)("label",{class:"form-label"},"Parent Branch",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>L.value.parent=a),class:"form-select"},[e[5]||(e[5]=(0,n.Lk)("option",{value:null},"No Parent",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(w.value,(a=>((0,n.uX)(),(0,n.CE)("option",{key:a.alias_id,value:a.alias_id},(0,s.v_)(a.name),9,b)))),128))],512),[[t.u1,L.value.parent]])]),(0,n.Lk)("div",h,[(0,n.Lk)("button",k,(0,s.v_)(f.value?"Update":"Create")+" Branch ",1)])])],32)]))}};const y=f;var L=y}}]);
//# sourceMappingURL=431.f48d5460.js.map