"use strict";(self["webpackChunkcrf03"]=self["webpackChunkcrf03"]||[]).push([[563],{3563:function(a,l,e){e.r(l),e.d(l,{default:function(){return E}});var t=e(6768),s=e(4232),c=e(5130),i=e(144),n=e(8082),u=e(5875);const o={class:"container mt-4"},m={class:"mt-4"},r={class:"table table-striped"},d=["onClick"],v=["onClick"],k={class:"modal-dialog"},b={class:"modal-content"},L={class:"modal-header"},h={class:"modal-title"},p={class:"modal-body"},C={class:"mb-3"},_={class:"mb-3"},g={key:0,class:"modal-backdrop fade show"},y={key:1,class:"alert alert-danger mt-3"};var f={__name:"ClaimPage",setup(a){const l=(0,u.x)(),e=(0,i.KR)([]),f=(0,i.KR)(!1),w=(0,i.KR)(!1),A=(0,i.KR)({claim_name:"",is_active:!0}),E=(0,i.KR)(""),S=async()=>{if(l.selectedBranch)try{const a=await n.A.get(`/master-claims/?branch=${l.selectedBranch}`);e.value=a.data}catch(a){E.value="Error fetching claims: "+a.message}};(0,t.wB)((()=>l.selectedBranch),S,{immediate:!0});const B=()=>{A.value={claim_name:"",is_active:!0},w.value=!1,f.value=!0},K=a=>{A.value={...a},w.value=!0,f.value=!0},R=()=>{f.value=!1},X=async()=>{try{w.value?await n.A.put(`/master-claims/${A.value.alias_id}/`,A.value):await n.A.post("/master-claims/",{...A.value,branch:l.selectedBranch}),S(),R()}catch(a){E.value="Error saving claim: "+a.message}},I=async a=>{try{await n.A.delete(`/master-claims/${a}/`),S()}catch(l){E.value="Error deleting claim: "+l.message}};return(a,l)=>{const i=(0,t.g2)("WorkingBranchSelector");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(i),(0,t.Lk)("div",m,[l[3]||(l[3]=(0,t.Lk)("h2",null,"Claims",-1)),(0,t.Lk)("button",{class:"btn btn-primary mb-3",onClick:B},"Add Claim"),(0,t.Lk)("table",r,[l[2]||(l[2]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Claim Name"),(0,t.Lk)("th",null,"Status"),(0,t.Lk)("th",null,"Actions")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.value,(a=>((0,t.uX)(),(0,t.CE)("tr",{key:a.alias_id},[(0,t.Lk)("td",null,(0,s.v_)(a.claim_name),1),(0,t.Lk)("td",null,[(0,t.Lk)("span",{class:(0,s.C4)({"badge bg-success":a.is_active,"badge bg-danger":!a.is_active})},(0,s.v_)(a.is_active?"Active":"Inactive"),3)]),(0,t.Lk)("td",null,[(0,t.Lk)("button",{class:"btn btn-sm btn-warning me-2",onClick:l=>K(a)},"Edit",8,d),(0,t.Lk)("button",{class:"btn btn-sm btn-danger",onClick:l=>I(a.alias_id)},"Delete",8,v)])])))),128))])])]),(0,t.Lk)("div",{class:(0,s.C4)(["modal fade",{show:f.value}]),tabindex:"-1",style:(0,s.Tr)({display:f.value?"block":"none"})},[(0,t.Lk)("div",k,[(0,t.Lk)("div",b,[(0,t.Lk)("div",L,[(0,t.Lk)("h5",h,(0,s.v_)(w.value?"Edit Claim":"Add Claim"),1),(0,t.Lk)("button",{type:"button",class:"btn-close",onClick:R})]),(0,t.Lk)("div",p,[(0,t.Lk)("form",{onSubmit:(0,c.D$)(X,["prevent"])},[(0,t.Lk)("div",C,[l[4]||(l[4]=(0,t.Lk)("label",{for:"claimName",class:"form-label"},"Claim Name",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"claimName","onUpdate:modelValue":l[0]||(l[0]=a=>A.value.claim_name=a),required:""},null,512),[[c.Jo,A.value.claim_name]])]),(0,t.Lk)("div",_,[l[6]||(l[6]=(0,t.Lk)("label",{for:"claimStatus",class:"form-label"},"Status",-1)),(0,t.bo)((0,t.Lk)("select",{class:"form-select",id:"claimStatus","onUpdate:modelValue":l[1]||(l[1]=a=>A.value.is_active=a),required:""},l[5]||(l[5]=[(0,t.Lk)("option",{value:!0},"Active",-1),(0,t.Lk)("option",{value:!1},"Inactive",-1)]),512),[[c.u1,A.value.is_active]])]),(0,t.Lk)("div",{class:"modal-footer"},[(0,t.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:R},"Close"),l[7]||(l[7]=(0,t.Lk)("button",{type:"submit",class:"btn btn-primary"},"Save changes",-1))])],32)])])])],6),f.value?((0,t.uX)(),(0,t.CE)("div",g)):(0,t.Q3)("",!0),E.value?((0,t.uX)(),(0,t.CE)("div",y,(0,s.v_)(E.value),1)):(0,t.Q3)("",!0)])}}},w=e(1241);const A=(0,w.A)(f,[["__scopeId","data-v-1b926827"]]);var E=A}}]);
//# sourceMappingURL=563.109b4364.js.map