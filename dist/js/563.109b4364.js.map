{"version":3,"file":"js/563.109b4364.js","mappings":"wlBA2EE,MAAMA,GAAcC,EAAAA,EAAAA,KACdC,GAASC,EAAAA,EAAAA,IAAI,IACbC,GAAcD,EAAAA,EAAAA,KAAI,GAClBE,GAAYF,EAAAA,EAAAA,KAAI,GAChBG,GAAeH,EAAAA,EAAAA,IAAI,CAAEI,WAAY,GAAIC,WAAW,IAChDC,GAAeN,EAAAA,EAAAA,IAAI,IAEnBO,EAAcC,UAClB,GAAIX,EAAYY,eACd,IACE,MAAMC,QAAiBC,EAAAA,EAAMC,IAAI,0BAA0Bf,EAAYY,kBACvEV,EAAOc,MAAQH,EAASI,IAC1B,CAAE,MAAOC,GACPT,EAAaO,MAAQ,0BAA4BE,EAAMC,OACzD,CACF,GAGFC,EAAAA,EAAAA,KAAM,IAAMpB,EAAYY,gBAAgBF,EAAa,CAAEW,WAAW,IAElE,MAAMC,EAAeA,KACnBhB,EAAaU,MAAQ,CAAET,WAAY,GAAIC,WAAW,GAClDH,EAAUW,OAAQ,EAClBZ,EAAYY,OAAQ,CAAI,EAGpBO,EAAiBC,IACrBlB,EAAaU,MAAQ,IAAKQ,GAC1BnB,EAAUW,OAAQ,EAClBZ,EAAYY,OAAQ,CAAI,EAGpBS,EAAaA,KACjBrB,EAAYY,OAAQ,CAAK,EAGrBU,EAAYf,UAChB,IACMN,EAAUW,YACNF,EAAAA,EAAMa,IAAI,kBAAkBrB,EAAaU,MAAMY,YAAatB,EAAaU,aAEzEF,EAAAA,EAAMe,KAAK,kBAAmB,IAAKvB,EAAaU,MAAOc,OAAQ9B,EAAYY,iBAEnFF,IACAe,GACF,CAAE,MAAOP,GACPT,EAAaO,MAAQ,uBAAyBE,EAAMC,OACtD,GAGIY,EAAcpB,UAClB,UACQG,EAAAA,EAAMkB,OAAO,kBAAkBJ,MACrClB,GACF,CAAE,MAAOQ,GACPT,EAAaO,MAAQ,yBAA2BE,EAAMC,OACxD,G,8zEC7HJ,MAAMc,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://crf03/./src/views/ClaimPage.vue","webpack://crf03/./src/views/ClaimPage.vue?9e35"],"sourcesContent":["<template>\r\n    <div class=\"container mt-4\">\r\n      <WorkingBranchSelector />\r\n      <div class=\"mt-4\">\r\n        <h2>Claims</h2>\r\n        <button class=\"btn btn-primary mb-3\" @click=\"openAddModal\">Add Claim</button>\r\n        <table class=\"table table-striped\">\r\n          <thead>\r\n            <tr>\r\n              <th>Claim Name</th>\r\n              <th>Status</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"claim in claims\" :key=\"claim.alias_id\">\r\n              <td>{{ claim.claim_name }}</td>\r\n              <td>\r\n                <span :class=\"{'badge bg-success': claim.is_active, 'badge bg-danger': !claim.is_active}\">\r\n                  {{ claim.is_active ? 'Active' : 'Inactive' }}\r\n                </span>\r\n              </td>\r\n              <td>\r\n                <button class=\"btn btn-sm btn-warning me-2\" @click=\"openEditModal(claim)\">Edit</button>\r\n                <button class=\"btn btn-sm btn-danger\" @click=\"deleteClaim(claim.alias_id)\">Delete</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n  \r\n      <!-- Add/Edit Claim Modal -->\r\n      <div class=\"modal fade\" :class=\"{ show: isModalOpen }\" tabindex=\"-1\" :style=\"{ display: isModalOpen ? 'block' : 'none' }\">\r\n        <div class=\"modal-dialog\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\">{{ isEditing ? 'Edit Claim' : 'Add Claim' }}</h5>\r\n              <button type=\"button\" class=\"btn-close\" @click=\"closeModal\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <form @submit.prevent=\"saveClaim\">\r\n                <div class=\"mb-3\">\r\n                  <label for=\"claimName\" class=\"form-label\">Claim Name</label>\r\n                  <input type=\"text\" class=\"form-control\" id=\"claimName\" v-model=\"currentClaim.claim_name\" required />\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                  <label for=\"claimStatus\" class=\"form-label\">Status</label>\r\n                  <select class=\"form-select\" id=\"claimStatus\" v-model=\"currentClaim.is_active\" required>\r\n                    <option :value=\"true\">Active</option>\r\n                    <option :value=\"false\">Inactive</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                  <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">Close</button>\r\n                  <button type=\"submit\" class=\"btn btn-primary\">Save changes</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"isModalOpen\" class=\"modal-backdrop fade show\"></div>\r\n  \r\n      <!-- Error Alert -->\r\n      <div v-if=\"errorMessage\" class=\"alert alert-danger mt-3\">\r\n        {{ errorMessage }}\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, watch } from 'vue';\r\n  import axios from '@/plugins/axios';\r\n  import { useBranchStore } from '@/stores/branchStore';\r\n  \r\n  const branchStore = useBranchStore();\r\n  const claims = ref([]);\r\n  const isModalOpen = ref(false);\r\n  const isEditing = ref(false);\r\n  const currentClaim = ref({ claim_name: '', is_active: true });\r\n  const errorMessage = ref('');\r\n  \r\n  const fetchClaims = async () => {\r\n    if (branchStore.selectedBranch) {\r\n      try {\r\n        const response = await axios.get(`/master-claims/?branch=${branchStore.selectedBranch}`);\r\n        claims.value = response.data;\r\n      } catch (error) {\r\n        errorMessage.value = 'Error fetching claims: ' + error.message;\r\n      }\r\n    }\r\n  };\r\n  \r\n  watch(() => branchStore.selectedBranch, fetchClaims, { immediate: true });\r\n  \r\n  const openAddModal = () => {\r\n    currentClaim.value = { claim_name: '', is_active: true };\r\n    isEditing.value = false;\r\n    isModalOpen.value = true;\r\n  };\r\n  \r\n  const openEditModal = (claim) => {\r\n    currentClaim.value = { ...claim };\r\n    isEditing.value = true;\r\n    isModalOpen.value = true;\r\n  };\r\n  \r\n  const closeModal = () => {\r\n    isModalOpen.value = false;\r\n  };\r\n  \r\n  const saveClaim = async () => {\r\n    try {\r\n      if (isEditing.value) {\r\n        await axios.put(`/master-claims/${currentClaim.value.alias_id}/`, currentClaim.value);\r\n      } else {\r\n        await axios.post('/master-claims/', { ...currentClaim.value, branch: branchStore.selectedBranch });\r\n      }\r\n      fetchClaims();\r\n      closeModal();\r\n    } catch (error) {\r\n      errorMessage.value = 'Error saving claim: ' + error.message;\r\n    }\r\n  };\r\n  \r\n  const deleteClaim = async (alias_id) => {\r\n    try {\r\n      await axios.delete(`/master-claims/${alias_id}/`);\r\n      fetchClaims();\r\n    } catch (error) {\r\n      errorMessage.value = 'Error deleting claim: ' + error.message;\r\n    }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .modal {\r\n    display: block;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n  }\r\n  </style>","import script from \"./ClaimPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ClaimPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ClaimPage.vue?vue&type=style&index=0&id=1b926827&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1b926827\"]])\n\nexport default __exports__"],"names":["branchStore","useBranchStore","claims","ref","isModalOpen","isEditing","currentClaim","claim_name","is_active","errorMessage","fetchClaims","async","selectedBranch","response","axios","get","value","data","error","message","watch","immediate","openAddModal","openEditModal","claim","closeModal","saveClaim","put","alias_id","post","branch","deleteClaim","delete","__exports__"],"sourceRoot":""}